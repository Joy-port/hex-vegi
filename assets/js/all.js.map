{"version":3,"sources":["all.js"],"names":["url","productList","document","querySelector","inputTxt","inputBtn","resultName","selectList","querySelectorAll","tableSortGroup","data","showData","getData","axios","get","then","response","filter","item","作物名稱","init","innerHTML","renderData","str","forEach","content","市場名稱","上價","中價","下價","平均價","交易量","selectListAll","btnGroup","btnCropsType","addEventListener","filterCropType","e","preventDefault","target","nodeName","classList","remove","add","type","dataset","種類代碼","textContent","resetSelect","searchCrops","searchCropsKey","value","trim","setAttribute","match","length","key","index","changeSelect","sortChange","sort","a","b","sortTableBytitle","sortTitle","title","sortDirection"],"mappings":"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","file":"all.js","sourcesContent":["const url =\"https://hexschool.github.io/js-filter-data/data.json\";\nconst productList = document.querySelector(\".show-list\");\n\nconst inputTxt = document.querySelector(\".input-txt\");\nconst inputBtn = document.querySelector(\".input-btn\");\nconst resultName = document.querySelector(\".result-name\");\nconst selectList = document.querySelectorAll(\".select-group\");\n\nconst tableSortGroup = document.querySelector(\".table-title\");\n\nlet data ; //原始資料\nlet showData = []; //用來放filter 後的結果\n\n//撈取資料\nfunction getData(){\n  axios.get(url)\n  .then(function (response) {\n   data = response.data.filter( item => item.作物名稱); //需要賦予data 資料\n   //renderData(data);\n   init(); //非同步\n});\n}\n//預設渲染畫面\nfunction init(){\n  productList.innerHTML = `<tr class=\"table-waiting\"><td colspan=\"7\">請輸入並搜尋想比價的作物名稱^＿^</td></tr>`;\n  \n}\n\ngetData();\n\n\n//更新選染畫面使用函式\n\nfunction renderData(data){\n  \n  let str ='';\n  data.forEach(item =>{\n    let content =`\n            <tr>\n            <td>${item.作物名稱}</td>\n            <td>${item.市場名稱}</td>\n            <td>${item.上價}</td>\n            <td>${item.中價}</td>\n            <td>${item.下價}</td>\n            <td>${item.平均價}</td>\n            <td>${item.交易量}</td>\n            </tr>\n            `;\n    str += content;\n\n  });\n  \n  productList.innerHTML = str;\n  selectListAll();\n}\n\n//btn type 初步篩選資料\n\nconst btnGroup = document.querySelector(\".btn-group\");\nconst btnCropsType = document.querySelectorAll(\".btn-group a\");\n\nbtnGroup.addEventListener('click', filterCropType, false);\n\n\nfunction filterCropType (e){\n  e.preventDefault();\n  if(e.target.nodeName !== \"A\"){\n    return ;\n  };\n  \n  btnCropsType.forEach(item =>{\n    item.classList.remove(\"active\");\n    e.target.classList.add(\"active\");\n  });\n \n  let type = e.target.dataset.type;\n  showData = data.filter(function(item ){\n    return type === item.種類代碼;\n  });\n  \n  resultName.textContent = e.target.textContent;\n  resetSelect();\n  \n  renderData(showData);\n}\n\n\n//搜尋資料\n\ninputBtn.addEventListener('click',searchCrops, false);\ninputTxt.addEventListener('keyup',searchCropsKey, false);\n\nfunction searchCrops (e){\n  //確認點擊位置\n  if(inputTxt.value.trim()=== \"\"){\n    inputBtn.setAttribute(\"class\",\"input-btn\");\n    return;\n  };\n\n  showData = data.filter(item => {\n    return item.作物名稱.match(inputTxt.value.trim()) \n });\n  btnCropsType.forEach(item =>{\n    item.classList.remove(\"active\");\n  });\n  \n  resultName.textContent = inputTxt.value.trim();\n  inputTxt.value = \"\";\n  inputBtn.setAttribute(\"class\",\"input-btn\");\n  resetSelect();\n  \n  if(showData.length === 0){\n    let content = `<tr class=\"table-waiting\"><td colspan=\"7\">查詢不到交易資訊QQ</td></tr>`;\n    productList.innerHTML = content;\n  \n    return ;\n  };\n\n  \n\n  renderData(showData);\n}\n\n//Enter 搜尋\nfunction searchCropsKey (e){\n  if(inputTxt.value.trim() ==\"\"){\n    return ;\n  };\n  inputBtn.classList.add(\"btn-active\");\n  if(e.key === \"Enter\"){\n    searchCrops(e);\n  };\n}\n\n\n\n//select change 下拉選單 事件監聽\n//selectList.addEventListener(\"change\", changeSelect, false);\nfunction selectListAll(){\n  selectList.forEach(function(item,index){\n    selectList[index].addEventListener(\"change\", changeSelect, false);\n  });\n}\n\n\nfunction changeSelect(e){\n  if(showData.length == 0){\n  return ;\n  };\n    switch(e.target.value){\n        case \"依上價排序\":\n        sortChange(\"上價\");\n         break;\n        case \"依中價排序\":\n        sortChange(\"中價\");\n         break;\n        case \"依下價排序\":\n        sortChange(\"下價\");\n         break;\n        case \"依平均價排序\":\n        sortChange(\"平均價\");\n         break;\n        case \"依交易量排序\":\n        sortChange(\"交易量\");\n         break;\n    }\n}\n\n//執行sort 函式\nfunction sortChange(e){\n  showData.sort(function(a,b){\n    return a[e]-b[e];\n  });\n  renderData(showData);\n}\n\n//進階篩選\n\ntableSortGroup.addEventListener('click', sortTableBytitle, false);\n\nfunction sortTableBytitle(e){\n  if(e.target.nodeName !== \"I\"){\n    return ;\n  }else{\n    let sortTitle = e.target.dataset.title;\n    let sortDirection = e.target.dataset.sort;\n    \n    if(sortDirection === \"up\"){\n      showData.sort((a,b)=>{\n       return a[sortTitle] - b[sortTitle];  //內容物需要研究\n      });\n      \n    }else if(sortDirection === \"down\"){\n      showData.sort((a,b)=>{\n    return b[sortTitle] - a[sortTitle];\n  });\n    };\n    \n    selectList.forEach(function(item,index){\n      selectList[index].value = `依${sortTitle}排序`;\n    });\n    renderData(showData);\n    \n  };\n  \n  \n}\n//清空selectList\nfunction resetSelect(){\n  selectList[0].value = \"排序篩選\";\n  selectList[1].value = \"排序\";\n\n}"]}