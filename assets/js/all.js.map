{"version":3,"sources":["all.js"],"names":["url","productList","document","querySelector","btnGroup","btnCropsType","querySelectorAll","inputTxt","inputBtn","resultName","selectList","tableSortGroup","data","filterData","getData","axios","get","then","response","filter","item","作物名稱","init","innerHTML","addEventListener","searchCrops","searchCropsKey","filterCropType","sortTableBytitle","selectListAll","forEach","index","changeSelect","update","showData","str","content","市場名稱","上價","中價","下價","平均價","交易量","e","preventDefault","target","nodeName","classList","remove","add","type","dataset","種類代碼","textContent","resetSelect","value","trim","match","length","key","sortChange","sort","a","b","sortTitle","title","sortDirection"],"mappings":"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","file":"all.js","sourcesContent":["const url =\"https://hexschool.github.io/js-filter-data/data.json\";\nconst productList = document.querySelector(\".show-list\");\n\nconst btnGroup = document.querySelector(\".btn-group\");\nconst btnCropsType = document.querySelectorAll(\".btn-group a\");\nconst inputTxt = document.querySelector(\".input-txt\");\nconst inputBtn = document.querySelector(\".input-btn\");\nconst resultName = document.querySelector(\".result-name\");\nconst selectList = document.querySelectorAll(\".select-group\");\n\nconst tableSortGroup = document.querySelector(\".table-title\");\n\n\nlet data ; \nlet filterData = []; \n\n//== axios撈取資料 ==//\nfunction getData(){\n  axios.get(url)\n  .then(function (response) {\n   data = response.data.filter( item => item.作物名稱); \n\n   init(); //非同步\n});\n}\n\n//== 預設渲染畫面 ==//\nfunction init(){\n  productList.innerHTML = `<tr class=\"table-waiting\"><td colspan=\"7\">請輸入並搜尋想比價的作物名稱^＿^</td></tr>`;\n\n  inputBtn.addEventListener('click',searchCrops, false);\n  inputTxt.addEventListener('keyup',searchCropsKey, false);\n  btnGroup.addEventListener('click', filterCropType, false);\n  tableSortGroup.addEventListener('click', sortTableBytitle, false);\n  selectListAll();\n}\n\n//== select pc mobile 兩個下拉選單監聽事件 ==//\n\nfunction selectListAll(){\n  selectList.forEach(function(item,index){\n    selectList[index].addEventListener(\"change\", changeSelect, false);\n  });\n}\n\ngetData();\n\n//== 更新選染畫面使用函式 ==//\nfunction update(showData){\n  \n  let str ='';\n  showData.forEach(item =>{\n    let content =`\n            <tr>\n            <td>${item.作物名稱}</td>\n            <td>${item.市場名稱}</td>\n            <td>${item.上價}</td>\n            <td>${item.中價}</td>\n            <td>${item.下價}</td>\n            <td>${item.平均價}</td>\n            <td>${item.交易量}</td>\n            </tr>\n            `;\n    str += content;\n\n  });\n  \n  productList.innerHTML = str;\n\n}\n\n//== 按鈕分類篩選資料 ==//\n\nfunction filterCropType (e){\n  e.preventDefault();\n  if(e.target.nodeName !== \"A\"){\n    return ;\n  };\n  \n  btnCropsType.forEach(item => {\n    item.classList.remove(\"active\");\n    e.target.classList.add(\"active\");\n  });\n \n  let type = e.target.dataset.type;\n  filterData = data.filter(item => type === item.種類代碼);\n  \n  resultName.textContent = e.target.textContent;\n  \n  resetSelect();\n  update(filterData);\n}\n\n//== 搜尋資料 ==//\n\nfunction searchCrops (e){\n  if(inputTxt.value.trim() !== \"\"){\n    inputBtn.classList.add(\"btn-active\");\n  }else{\n    return ;\n  };\n\n  filterData = data.filter(item => item.作物名稱.match(inputTxt.value.trim()));\n  btnCropsType.forEach(item =>item.classList.remove(\"active\") );\n  \n  resultName.textContent = inputTxt.value.trim();\n  inputTxt.value = \"\";\n  inputBtn.classList.remove(\"btn-active\");\n  resetSelect();\n  \n  if(filterData.length === 0){\n    let content = `<tr class=\"table-waiting\"><td colspan=\"7\">查詢不到交易資訊QQ</td></tr>`;\n    productList.innerHTML = content;\n    return ;\n  };\n\n  update(filterData);\n}\n\n//== Enter Keyup 鍵盤搜尋 ==//\nfunction searchCropsKey (e){\n  if(inputTxt.value.trim() ==\"\"){\n    return ;\n  };\n  inputBtn.classList.add(\"btn-active\");\n  if(e.key === \"Enter\"){\n    searchCrops(e);\n  };\n}\n\n\n\n//== select change 下拉選單 ==//\nfunction changeSelect(e){\n  if(filterData.length == 0){\n  return ;\n  };\n    switch(e.target.value){\n        case \"依上價排序\":\n        sortChange(\"上價\");\n         break;\n        case \"依中價排序\":\n        sortChange(\"中價\");\n         break;\n        case \"依下價排序\":\n        sortChange(\"下價\");\n         break;\n        case \"依平均價排序\":\n        sortChange(\"平均價\");\n         break;\n        case \"依交易量排序\":\n        sortChange(\"交易量\");\n         break;\n    }\n}\n\n//==  下拉選單 排序 ==//\nfunction sortChange(e){\n  filterData.sort((a,b) => a[e]-b[e]);\n  update(filterData);\n}\n\n//== 進階篩選  表單內排序 ==//\nfunction sortTableBytitle(e){\n  if(e.target.nodeName !== \"I\"){\n    return ;\n  }else{\n    let sortTitle = e.target.dataset.title;\n    let sortDirection = e.target.dataset.sort;\n    \n    if(sortDirection === \"up\"){\n      filterData.sort((a,b)=> b[sortTitle] - a[sortTitle]);\n      \n    }else if(sortDirection === \"down\"){\n      filterData.sort((a,b)=> a[sortTitle] - b[sortTitle]);\n    };\n  \n    selectList.forEach(function(item,index){\n      selectList[index].value = `依${sortTitle}排序`;\n    });\n    update(filterData);\n  };\n}\n\n//== 清空 下拉選單 ==//\nfunction resetSelect(){\n  selectList[0].value = \"排序篩選\";\n  selectList[1].value = \"排序\";\n\n}"]}